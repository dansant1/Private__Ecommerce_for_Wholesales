<template name="index">
	{{#if currentUser}}       
        {{>menuTienda}}
        {{>Template.dynamic template=contenido}}
    {{else}}
        {{>menu}}
        {{>loginAdmin}}
    {{/if}}
</template>

<template name="menu">
	<nav class="navbar navbar-default  navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          
          <a class="navbar-brand" style="color: white; padding-top: 26px;" href="#">
           <img src="/logo.png" style="width: 160px; height: 30px; margin-top: -4px">
          </a>
        </div>
        
      </div>
    </nav>
    <br><br>
    <br>
    <br>
    <br>
    <br>
</template>

<template name="tienda">
	<div class="container">
		
		<div class="row">
			{{>ProductosDeLaTienda}}
		</div>
		<!--<div class="row">
			{{>Novedades}}		
		</div> -->
	</div>
</template>

<!--<template name="ProductosDeLaTienda">
	<div class="page-header clearfix">
    	<div>
      	<span class="dropdown" style="display: inline-block; width: 20%;">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Categorias <span class="caret"></span></a>
            <ul class="dropdown-menu">     			
          		{{#each categorias}}
               	<li class="c"><a>{{this.nombre}}</a></li>
              {{/each}}
         		</ul>
        </span>
          	

          	<input style="display: inline-block; width: 60%;" type="text" name="search" class="form-control"  placeholder="Buscar productos...">
	
    	</div>
    	
  	</div>

  	<div class="row">
			{{>slider}}
	</div>

  <div class="productos">
    {{#if searching}}
      {{> loading}}
    {{else}}
      {{#each productos}}
        <div class="producto">
        	{{#each fotosproducto this._id}}
				<img src="{{this.url}}" alt="" class="fotoProducto"/>
        	{{/each}}
          	<p>{{nombre}}</p>
          	<p>{{descripcion}}</p>
          	<p>S/. {{precio}}</p>
          	<p>
          		<div class="input-group">
          			  			
          			<input type="text" name="{{this._id}}" class="form-control input-number" value="1" min="1" max="100000">
          
          			 
      			</div>
          	</p>
          	<p>
          		<button id="boton-c" type="button" class="btn btn-primary btn-block agregar-carrito">Agregar al carrito</button>
          	</p>
        </div>
      {{else}}
        <p class="alert alert-warning">No se encontró {{query}}. Lo sentimos.</p>
      {{/each}}
    {{/if}}
  </div>
</template> -->

<template name="ProductosDeLaTienda">
  <div class="container">
        <div class="row">
			{{>slider}}
	    </div>
        <div class="row">
            <input style="display: block; width: 80%; margin: 20px auto;" type="text" name="search" class="form-control"  placeholder="Buscar productos...">
        </div>
        <div class="row">
            <ul class="nav nav-tabs">
                <li class="active"><a data-toggle="tab" href="#menu1">Todos</a></li>
                {{#each categorias}}
                <li><a data-toggle="tab" href="#{{this._id}}">{{this.nombre}}</a></li>
                {{/each}}
                <!--<li><a data-toggle="tab" href="#menu1">Menu 1</a></li>
                <li><a data-toggle="tab" href="#menu2">Menu 2</a></li> -->
            </ul>

            <div class="tab-content">
                <div id="menu1" class="tab-pane fade in active">
                   
                    <div class="container">
                            {{#each categorias}}
                                <div class="row">
                               {{#if hayResultado this._id}} 
                               <h3>{{this.nombre}}</h3>
                                <div class="flexible" style="height: 445px;">
                                    {{#if searching}}
                                        {{> loading}}
                                    {{else}}
                                        {{#each productos this._id}}
                                        
                                            <div class="producto">
                                                {{#each fotosproducto this._id}}
                                                    <img src="{{this.url}}" alt="" class="fotoProducto"/>
                                                {{/each}}
                                                <p>{{nombre}}</p>
                                                <p>{{descripcion}}</p>
                                                <p>S/. {{precio}}</p>
                                                <p>
                                                <div class="input-group">
                                                    <input type="text" name="{{this._id}}" class="form-control input-number" value="1" min="1" max="100000">
                                                </div>
                                                </p>
                                                <p>
                                                <button id="boton-c" type="button" class="btn btn-primary btn-block agregar-carrito">Agregar al carrito</button>
                                                </p>
                                            </div>
                                       
                                        {{/each}}
                                    {{/if}}
                                </div>
                                {{else}}
                                   
                                     {{#if searching}}
                                        {{> loading}}
                                    {{else}}
                                        {{#each productos this._id}}
                                        <h3>{{nombreCategoria this.categoriaId}}</h3>
                                            <div class="producto">
                                                {{#each fotosproducto this._id}}
                                                    <img src="{{this.url}}" alt="" class="fotoProducto"/>
                                                {{/each}}
                                                <p>{{nombre}}</p>
                                                <p>{{descripcion}}</p>
                                                <p>S/. {{precio}}</p>
                                                <p>
                                                <div class="input-group">
                                                    <input type="text" name="{{this._id}}" class="form-control input-number" value="1" min="1" max="100000">
                                                </div>
                                                </p>
                                                <p>
                                                <button id="boton-c" type="button" class="btn btn-primary btn-block agregar-carrito">Agregar al carrito</button>
                                                </p>
                                            </div>
                                       
                                        {{/each}}
                                    {{/if}}
                                {{/if}} 
                                <hr>
                                </div>
                            {{/each}}
                    </div>
                </div>
                {{#each categorias}}
                <div id="{{this._id}}" class="tab-pane fade ">
                    
                    <div class="flexible" style="height: 445px;">
                        {{#each productos this._id}}
                        <h3>{{nombreCategoria this.categoriaId}}</h3>
                        <div class="producto">
                            {{#each fotosproducto this._id}}
                                <img src="{{this.url}}" alt="" class="fotoProducto"/>
                            {{/each}}
                                <p>{{nombre}}</p>
                                <p>{{descripcion}}</p>
                                <p>S/. {{precio}}</p>
                                <p>
                                <div class="input-group">
                                            <input type="text" name="{{this._id}}" class="form-control input-number" value="1" min="1" max="100000">
                                </div>
                                </p>
                                <p>
                                <button id="boton-c" type="button" class="btn btn-primary btn-block agregar-carrito">Agregar al carrito</button>
                                </p>
                        </div>             
                        {{/each}}
                    </div>
                </div>
             
                {{/each}}
            </div>
        </div>

  </div>
  <div class="page-header clearfix">
    	<h2 class="pull-left">Novedades</h2>
  	</div>

  	<div class="flexible" style="height: 465px;">
    
      
      {{#each productosn}}
        <div class="producto">
            <span class="novedad">
                N
            </span>
        	{{#each fotosproducto this._id}}
				<img src="{{this.url}}" alt="" class="fotoProducto"/>
        	{{/each}}
          	<p>{{nombre}}</p>
          	<p>{{descripcion}}</p>
          	<p>S/. {{precio}}</p>
          	<p>
          		<div class="input-group">
          			<input type="text" name="{{this._id}}" class="form-control input-number" value="1" min="1" max="10">
          
          		
      			</div>
          	</p>
          	<p>
          		<button id="boton-c" type="button" class="btn btn-primary btn-block agregar-carrito">Agregar al carrito</button>
          	</p>
        </div>
      
      {{/each}}
   
  </div>
</template>

<template name="loading">
	<p>Cargando...</p>
</template>

<template name="carrito">
    <div class="modal fade">
        <div class="modal-dialog  modal-lg">
            <div class="modal-content">

                <div class="modal-header">
                    <h4 class="modal-title">Carrito de compras</h4>
                </div>

                <div class="modal-body">
                  
    
     
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>Producto</th>
                        <th>Cantidad</th>
                        <th class="text-center">Precio (Inc. IGV)</th>
                        <th class="text-center">Total</th>
                        <th> </th>
                    </tr>
                </thead>
                <tbody>
                {{#each productos}}
                    <tr>
                        <td class="col-sm-8 col-md-6">
                        <div class="media">
                           <!-- <a class="thumbnail pull-left" href="#"> 
                            {{#each fotosproducto this.productoId}}
								<img src="{{this.url}}" style="display: inline-block; margin-left: 10px; width:120px; height: 50px;" alt="" class="media-object fotoProducto"/>
        					{{/each}}
                           	</a> -->
                            <div class="media-body">
                                <h4 class="media-heading"><a href="#">{{this.producto}}</a></h4>
                            </div>
                        </div></td>
                        <td class="col-sm-1 col-md-1" style="text-align: center">
                       		<strong>{{this.cantidad}}</strong>
                        </td>
                        <td class="col-sm-1 col-md-3 text-center"><strong>S/. {{this.precio}}</strong></td>
                        <td class="col-sm-1 col-md-1 text-center"><strong>S/. {{total}}</strong></td>
                       
                        <td class="col-sm-1 col-md-1">

                        	<button type="button" class="btn btn-danger eliminar">
                            	<span class="glyphicon glyphicon-remove"></span> Eliminar
                        	</button>
                        </td>
                    </tr>
                   {{/each}}
                </tbody>
               	<div>
               		 <strong>Total S/. {{superTotal}}</strong>
               	</div>
                <tfoot>
                    
                    <tr>
                        <td>   </td>
                        <td>   </td>
                        <td> 
				
						
                        </td>
                        <td>
                        <button type="button" class="btn btn-default" data-dismiss="modal">
                            <span class="glyphicon glyphicon-shopping-cart"></span> Continuar comprando
                        </button></td>
                        <td>
                        <a href="/pedido" class="btn btn-success ordenar">
                            Realizar orden <span class="glyphicon glyphicon-play"></span>
                        </a></td>
                    </tr>
                </tfoot>
            </table>
        
    

                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
                </div>

            </div>
        </div>
    </div>
</template>

<template name="editarCuenta">
  
    <div class="modal fade">
        <div class="modal-dialog  modal-lg">
            <div class="modal-content">

                <div class="modal-header">
                    <h4 class="modal-title">Editar mi cuenta</h4>
                </div>

                <div class="modal-body"> 
                {{#with cliente}}
                    <form>
                      <div class="form-group">
                        <label for="nombre">Nombre</label>
                        <input type="text" class="form-control"  name="nombre" id="nombre" value="{{this.nombre}}">
                      </div>
                      <div class="form-group">
                        <label for="dc">Dirección de cobranza</label>
                        <input type="text" class="form-control" name="dc" id="dc" value="{{this.direccionCobranza}}">
                      </div>
                      <div class="form-group">
                        <label for="de">Dirección de envío</label>
                        <input type="text" class="form-control" name="de" id="de" value="{{this.direccionEnvio}}">
                      </div>  
                      <button type="submit" class="btn btn-default">Guardar</button>
                  </form>
                {{/with}}

                </div>
        </div>
    </div>
    </div>

</template>

<template name="pedido">
	
	<div class="container">
		<div class="row">
	
			<div class="col-md-4">
				<div class="box-white">
					<h2>1. Revise su pedido</h2>
					 <table class="table">
    					<thead>
      						<tr>
        						<th>Producto</th>
        						<th>Cantidad</th>
        						<th>Precio (incluye IGV)</th>
      						</tr>
    				</thead>
    				<tbody>
      					{{#each carrito}}

      					<tr>
          					<td> {{this.producto}} </td>
        					<td> {{this.cantidad}} </td>
        					<td>S/ {{this.precio}} </td>
      					</tr>

      					{{/each}}
     
    				</tbody>
  					</table>

  					 <table class="table">
    				<tbody>
      					<tr>
        					<td>Subtotal sin IGV</td>
      						<td>S/ {{sinIGV}}</td>
      					</tr>

      					<tr>
        					
        					
        					<td>IGV (18%)</td>
        					<td>S/ {{igv}}</td>
      					</tr>
      					<tr>
        					<td>Total</td>
        					<td> S/ {{supertotal}} </td>
      					</tr>
     
    				</tbody>
  					</table>
  					<button type="button" class="btn btn-primary ordenar">Finzalizar compra</button>
				</div>
			</div>
				

			<div class="col-md-4">
				<div class="box-white">
					<h2>2. Condiciones de pago</h2>
					<table class="table">
   <!-- Son datos del cliente -->
    					<tbody>
    						{{#each condiciones}}
      						<tr>

        						<td> 
									<input type="radio" name="pago" class="pago"  value="{{this.nombre}}" id="{{this._id}}">
    								<label for="{{this._id}}">{{this.nombre}}</label>
        						</td>
        
      						</tr> 
      						{{/each}}
    					</tbody>
  				</table>
  				

  				<h2>3. Sugerencia</h2>
  					<div class="form-group">

  						<textarea class="form-control" name="comentario" rows="5" id="comment"></textarea>
					</div>
				</div>
			</div>

				<div class="col-md-4">
				<div class="box-white">
					<h2>4. Información</h2>
					
  						<table class="table">
   <!-- Son datos del cliente -->
    						<tbody>
      							<tr>
        							<td>Razón social</td>
        							<td> {{rs}} </td>
      							</tr>
      							<tr>
       	 							<td>RUC</td>
        							<td> {{ruc}} </td>
      							</tr>
      							<tr>
        							<td>Dirección de facturación</td>
        							<td> {{df}} </td>
      							</tr>
      <tr>
        <td>Dirección de entrega</td>
        <td>{{de}}</td>
        
      </tr>
      <tr>
        <td>Teléfono</td>
        <td>{{telefono}}</td>
      
      </tr>
      <tr>
        <td>Correo electronico de la empresa</td>
        <td> {{correo}} </td>
      
      </tr>

     
      
      
    </tbody>
  </table>

  <h4>Datos de asesor</h4>
					<table class="table">
                        <thead>
      						<tr>
        						<th>Nombre</th>
        						<th>Emial</th>
        						<th>Teléfono</th>
      						</tr>
    				    </thead>
    					<tbody>
    						
      						  <tr>

        <td>{{asesor}}</td>
        <td>{{emailAsesor}}</td>
        <td>{{telefonoAsesor}}</td>
                                </tr>
      						
    					</tbody>
  				</table>

				</div>
			</div>
		</div>
	</div>

</template>

<template name="miCuenta">
	<div class="container">
		<div class="row">
			<div class="col-md-12">
				<h2>Mi Cuenta</h2>
				<p>Hola, {{currentUser.profile.nombre}} </p>
			</div>
		</div>
		<div class="row">
			<div class="col-md-12">
				<h2>Mi Historial</h2>
				<table class="table">
    <thead>
      <tr>
        <th>Pedido</th>
        <th>Fecha</th>
        <th>Status</th>
        <th>Condición de pago</th>
        <th>Total</th>
        <th>Ver</th>
      </tr>
    </thead>
    <tbody>
      	{{#each ordenes}}
      	<tr>
        	<td> {{this.codigo}} </td>
        	<td> {{fecha}} </td>
        	<td> {{this.status}} </td>
          <td> {{this.condicionPago}} </td>
        	<td>S/ {{this.total}} </td>
        	<td> <button type="button" class="btn btn-primary ver">Ver</button> </td>
      	</tr>
      	{{/each}}
    </tbody>
  </table>
			</div>
		</div>

		<div class="row">
			<div class="col-md-12">
				<div class="row">
					<div class="col-md-12">
						<h4>información de contacto</h4>
						<p>{{currentUser.profile.nombre}}</p>
						<p> {{email}} </p>
						<p> <button type="button" class="btn btn-primary editar">Editar cuenta</button></p>
						
						
					</div>
					
				</div>
				<div class="row">
					<div class="col-md-6">
						<h4>Dirección de cobranza</h4>
						<p> {{cobranza}} </p>
					</div>
					<div class="col-md-6">	
						<h4>Dirección de envio</h4>
						<p>{{envio}}</p>
					</div>
				</div>
			</div>
		</div>
	</div>
</template>

<template name="Novedades">
	<div class="page-header clearfix">
    	<h2 class="pull-left">Novedades</h2>
  	</div>

  	<div class="flexible" style="height: 465px;">
    
      
      {{#each productos}}
        <div class="producto">
            <span class="novedad">
                N
            </span>
        	{{#each fotosproducto this._id}}
				<img src="{{this.url}}" alt="" class="fotoProducto"/>
        	{{/each}}
          	<p>{{nombre}}</p>
          	<p>{{descripcion}}</p>
          	<p>S/. {{precio}}</p>
          	<p>
          		<div class="input-group">
          			<input type="text" name="{{this._id}}" class="form-control input-number" value="1" min="1" max="10">
          
          		
      			</div>
          	</p>
          	<p>
          		<button id="boton-c" type="button" class="btn btn-primary btn-block agregar-carrito">Agregar al carrito</button>
          	</p>
        </div>
      
      {{/each}}
   
  </div>
</template>

<template name="menuTienda">
    <nav class="navbar navbar-default  navbar-fixed-top">
          <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="/" style="color: white; padding-top: 26px;">
                       <img src="/logo.png" style="width: 160px; height: 30px; margin-top: -4px;">
                    </a>
                </div>
                <div id="navbar" class="navbar-collapse collapse">
                	 <ul class="nav navbar-nav">
                    	<li>
                    		<a style="color: white;">
                    			Hola, {{currentUser.profile.nombre}}
                    		</a>
                    	</li>
                        <li>
                        	<a href="/cuenta" style="color: white">
                        		Mi cuenta
                        	</a>
                        </li>
                    </ul>
                    <ul class="nav navbar-nav navbar-right">
                    	<li>
                      {{#each foto}}
                       <img src="{{this.url}}" alt="" style="margin-left: 15px;" class="fotoAsesor"/>
                      {{/each}}
                      
                      </li>
                      <li>
                    		<a style="color: white; padding-top: 0px;"> 
								          <p style="font-size: 13px; margin-bottom: 0;">Asesor: {{vendedor}} </p>
								          <p style="font-size: 13px; margin-bottom: 0;">Telf. {{telefono}} </p>
                    			<p style="font-size: 13px; margin-bottom: 0;"> {{emailVendedor}} </p>
                    		</a>
                    	</li>
                    	<li class="carritos"><a style="color: white; font-size: 24px">
                    		{{productos}} <i class="fa fa-shopping-cart" aria-hidden="true"></i></a></li>
                        <li class="salir"><a style="color: white">Cerrar Sesión</a></li>
                    </ul>
                </div>
            </div>
    </nav>
    <br><br>
    <br>
    <br>
    <br>
    <br>
</template>


<template name="OrdenDetalle">
    <div class="container">
        <div class="row">
        {{#with orden}}
        <h2>Orden Nº {{this.codigo}}</h2>
        <p>Status {{this.status}}</p> 
            <div class="col-md-12">
                 <table class="table table-hover">
                <thead>
                    <tr>
                        <th>Producto</th>
                        <th>Cantidad</th>
                        <th class="text-center">Precio (Inc. IGV)</th>
                        <th class="text-center">Total</th>
                        
                    </tr>
                </thead>
                
                <tbody>
                {{#each this.ordenes}}
                    <tr>
                        <td>{{producto}}</td>
                        <td class="col-sm-1 col-md-1" style="text-align: center">
                            <strong>{{cantidad}}</strong>
                        </td>
                        <td class="col-sm-1 col-md-3 text-center"><strong>S/. {{this.precio}}</strong></td>
                        <td class="col-sm-1 col-md-1 text-center"><strong>S/. {{total}}</strong></td>
                       
                        
                    </tr>
                   {{/each}}
                </tbody>
               
                <div>
                     <strong>Total S/. {{superTotal}}</strong>
                </div>
            </table>
        
    
            </div>
             {{/with}}
        </div>
    </div>
</template>

<template name="slider">
	<div class="container" style="width: 70%;">
  
  <div class="swiper-container">
   
    <div class="swiper-wrapper">
        
        {{#each imagenes}}

      <div class="swiper-slide">
        <img src="{{this.url}}" alt="" class="slide"/>
      </div>

   {{/each}} 
        
    </div>
    
   <div class="swiper-pagination"></div> 
    
    
    <div class="swiper-button-prev"></div>
    <div class="swiper-button-next"></div> 
    

    <div class="swiper-scrollbar"></div>
  </div>
  		
</div>
<br>
</template>